---
title: '安全'
description: '验证 Webhook 的真实性'
og:title: 'Webhook 安全 | Firecrawl'
og:description: '验证 Webhook 的真实性'
icon: 'shield-check'
---

import WebhookSignatureJS from '/snippets/zh/v2/webhook-signature/js.mdx';
import WebhookSignaturePython from '/snippets/zh/v2/webhook-signature/python.mdx';

Firecrawl 使用 HMAC-SHA256 对每个 Webhook 请求进行签名。验证签名可以确保请求是可信的，且未被篡改。


<div id="secret-key">
  ## 密钥
</div>

你的 webhook 密钥可在账户设置中的 [Advanced 选项卡](https://www.firecrawl.dev/app/settings?tab=advanced) 找到。每个账户都有一个唯一的密钥，用于为所有 webhook 请求签名。

<Warning>
  请妥善保管你的 webhook 密钥，切勿公开泄露。如果你认为
  密钥已遭泄露，请立即在账户设置中重新生成。
</Warning>

<div id="signature-verification">
  ## 签名验证
</div>

每个 webhook 请求都会包含一个名为 `X-Firecrawl-Signature` 的请求头：

```
X-Firecrawl-Signature: sha256=abc123def456...
```


<div id="how-to-verify">
  ### 如何验证
</div>

1. 从 `X-Firecrawl-Signature` 头中提取签名
2. 获取原始请求体（不要先解析）
3. 使用你的密钥计算 HMAC-SHA256
4. 使用时间安全的比较函数比较签名

<div id="implementation">
  ### 实现
</div>

<CodeGroup>

<WebhookSignatureJS />

<WebhookSignaturePython />

</CodeGroup>

<div id="best-practices">
  ## 最佳实践
</div>

<div id="always-verify-signatures">
  ### 始终验证签名
</div>

切勿在未验证签名的情况下处理 webhook：

```javascript
app.post('/webhook', (req, res) => {
  if (!verifySignature(req)) {
    return res.status(401).send('未授权');
  }
  processWebhook(req.body);
  res.status(200).send('OK');
});
```


<div id="use-timing-safe-comparisons">
  ### 使用时间常数/计时安全的比较
</div>

标准字符串比较可能泄露时间信息。在 Node.js 中使用 `crypto.timingSafeEqual()`，在 Python 中使用 `hmac.compare_digest()`。

<div id="use-https">
  ### 使用 HTTPS
</div>

始终为 webhook 端点使用 HTTPS，确保传输过程中的载荷已被加密。