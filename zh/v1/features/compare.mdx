---
title: '变更跟踪（测试版）'
description: 'Firecrawl 可跟踪当前页面与先前版本之间的变更，并告知是否已更新'
og:title: "变更跟踪（测试版） | Firecrawl"
icon: "code-changeTracking"
og:description: "Firecrawl 可跟踪当前页面与先前版本之间的变更，并告知是否已更新"
---

<div id="this-document-is-outdated">
  # 此文档已过时
</div>

请查看新版本：[changeTracking](/zh/features/change-tracking)

***

<div id="old-version">
  # 旧版本
</div>

使用新的 `changeTracking` format，你可以监控网站上的变更。

`changeTracking` format 在响应中返回以下字段：

* `previousScrapeAt`：与当前页面进行 changeTracking 比较所对应的上一次抓取时间戳。（如果没有上一次抓取则为 `null`）
* `changeStatus`：两个页面版本之间比较的结果
  * `new`：该页面此前不存在或未被发现。（通常其 `previousScrapeAt` 为 `null`）
  * `same`：自上次抓取以来，该页面内容未发生变化。
  * `changed`：自上次抓取以来，该页面内容已发生变化。
  * `removed`：自上次抓取以来，该页面已被移除。
* `visibility`：当前页面/URL 的可见性。
  * `visible`：该页面可见，表示其 URL 通过自然路径被发现（通过其他可见页面上的链接或站点地图）。
  * `hidden`：该页面不可见，表示其 URL 是通过对同一 URL 以往抓取的记忆被发现的。

一些需要了解的事实：

* 抓取结果始终基于其 markdown 响应进行比较。
  * 使用 `changeTracking` format 时也必须指定 `markdown` format。也可以额外指定其他 formats。
  * 比较算法对空白字符与内容顺序的变化具有鲁棒性。为抵御带有随机化 URL 的验证码和反机器人机制，当前会忽略 iframe 的源 URL。
* 用于比较的先前抓取目前仅会基于源 URL、团队 ID 和 `markdown` format 进行匹配，而不会基于其他任何抓取或爬取选项。
  * 为实现有效比较，输入的 URL 应与之前针对相同内容的请求完全一致。这是我们正努力绕过的限制。
  * 使用不同的 `includePaths`/`excludePaths` 爬取相同 URL 时，配合 `changeTracking` 会产生不一致。
  * 使用不同的 `includeTags`/`excludeTags`/`onlyMainContent` 抓取相同 URL 时，配合 `changeTracking` 会产生不一致。
  * 被比较的页面也会与仅包含 `markdown` format 而不包含 `changeTracking` format 的先前抓取进行比较。
  * 比较限定在你的团队范围内。如果你使用自己的 API key 第一次抓取某个 URL，其 `changeStatus` 将始终为 `new`，即便其他 Firecrawl 用户之前抓取过该 URL。
* 在 Beta 阶段，建议关注结果文档中的 `warning` 字段，并处理响应中可能缺失的 `changeTracking` 对象。我们将持续监控系统，以尽可能减少这种情况的发生。
  * 当我们在数据库中查找用于比较的先前抓取时超时，可能会出现这种情况。我们将持续监控，并在功能正式发布前推进改进与优化。
* 目前我们不会返回页面实际变更内容的 diff。
  * 我们尚不清楚最优的呈现 format。如果你需要 diff，你大概率已经知道希望以何种 format 展示。欢迎通过 [mogery@firecrawl.com](mailto:mogery@firecrawl.com) 与我们联系，我们会把它加上！

<div id="examples">
  ## 示例
</div>

<div id="scrape">
  ### 抓取
</div>

```json
{
    "url": "https://firecrawl.dev",
    "formats": ["markdown", "changeTracking"]
}
```

```json
{
  "success": true,
  "data": {
    "markdown": "...",
    "metadata": {...},
    "changeTracking": {
      "previousScrapeAt": "2025-03-30T15:07:17.543071+00:00",
      "changeStatus": "same",
      "visibility": "visible"
    }
  }
}
```

<div id="crawl">
  ### 爬取
</div>

```json
{
    "url": "https://firecrawl.dev",
    "scrapeOptions": {
        "formats": ["markdown", "changeTracking"]
    }
}
```
