---
title: 'Node'
description: 'Firecrawl Node SDK 是对 Firecrawl API 的封装，帮助你轻松将网站转换为 Markdown。'
icon: 'node'
og:title: "Node SDK | Firecrawl"
og:description: "Firecrawl Node SDK 是对 Firecrawl API 的封装，帮助你轻松将网站转换为 Markdown。"
---

> 注意：此处使用的是 [Firecrawl API 的 v0 版本](/zh/v0/introduction)，该版本即将弃用。建议切换到 [v1](/zh/sdks/node)。

<div id="installation">
  ## 安装
</div>

要安装 Firecrawl 的 Node SDK，可以使用 npm：

```bash
npm install @mendable/firecrawl-js@0.0.36
```

<div id="usage">
  ## 用法
</div>

1. 在 [firecrawl.dev](https://firecrawl.dev) 获取 API 密钥
2. 将该 API 密钥设置为名为 `FIRECRAWL_API_KEY` 的环境变量，或作为参数传递给 `FirecrawlApp` 类。

以下是一个包含错误处理的 SDK 使用示例：

```js
import FirecrawlApp from '@mendable/firecrawl-js';

// 使用您的 API 密钥初始化 FirecrawlApp
const app = new FirecrawlApp({ apiKey: "YOUR_API_KEY" });

// 抓取单个 URL
const url = 'https://docs.firecrawl.dev';
const scrapedData = await app.scrapeUrl(url);

// 爬取整个网站
const crawlUrl = 'https://docs.firecrawl.dev';
const params = {
  crawlerOptions: {
    excludes: ['blog/'],
    includes: [], // 为空则包含所有页面
    limit: 1000,
  },
  pageOptions: {
      onlyMainContent: true
  }
};

const crawlResult = await app.crawlUrl(crawlUrl, params);
```

<div id="scraping-a-url">
  ### 抓取 URL
</div>

要在包含错误处理的情况下抓取单个 URL，请使用 `scrapeUrl` 方法。该方法接收 URL 作为参数，并以字典（dictionary）形式返回抓取结果。

```js
const url = 'https://example.com';
const scrapedData = await app.scrapeUrl(url);
```

<div id="crawling-a-website">
  ### 爬取网站
</div>

要在具备错误处理的情况下爬取网站，请使用 `crawlUrl` 方法。它接收起始 URL 和可选参数。通过 `params` 参数可为爬取任务指定其他选项，例如最大爬取页数、允许的域名以及输出 formats。

```js
const crawlUrl = 'https://example.com';

const params = {
  crawlerOptions: {
    excludes: ['blog/'],
    includes: [], // 留空以包含所有页面
    limit: 1000,
  },
  pageOptions: {
    onlyMainContent: true
  }
};

const waitUntilDone = true;
const pollInterval = 5;

const crawlResult = await app.crawlUrl(
  crawlUrl,
  params,
  waitUntilDone,
  pollInterval
);
```

<div id="checking-crawl-status">
  ### 检查爬取状态
</div>

要在包含错误处理的情况下检查爬取任务状态，请使用 `checkCrawlStatus` 方法。它接收作业 ID 作为参数，并返回该爬取任务的当前状态。

```js
const status = await app.checkCrawlStatus(jobId);
```

<div id="extracting-structured-data-from-a-url">
  ### 从 URL 提取结构化数据
</div>

借助 LLM 提取，你可以轻松从任意 URL 中获取结构化数据。我们支持 Zod 模式（schema），让这一过程更简单。以下是用法：

```js
import FirecrawlApp from "@mendable/firecrawl-js";
import { z } from "zod";

const app = new FirecrawlApp({
  apiKey: "fc-YOUR_API_KEY",
});

// 定义用于提取内容的模式
const schema = z.object({
  top: z
    .array(
      z.object({
        title: z.string(),
        points: z.number(),
        by: z.string(),
        commentsURL: z.string(),
      })
    )
    .length(5)
    .describe("Hacker News 上的前 5 条新闻"),
});

const scrapeResult = await app.scrapeUrl("https://firecrawl.dev", {
  extractorOptions: { extractionSchema: schema },
});

console.log(scrapeResult.data["llm_extraction"]);
```

<div id="search-for-a-query">
  ### 搜索查询
</div>

使用 `search` 方法，你可以在搜索引擎中检索查询，并获取排名靠前的结果及其对应的页面内容。该方法将查询作为参数，并返回搜索结果。

```js
const query = '什么是 Mendable？';
const searchResults = await app.search(query, {
  pageOptions: {
    fetchPageContent: true // 为每条搜索结果抓取页面内容
  }
});
```

<div id="error-handling">
  ## 错误处理
</div>

SDK 会处理 Firecrawl API 返回的错误并抛出相应异常。若在请求过程中发生错误，将抛出包含详细错误信息的异常。上面的示例展示了如何使用 `try/catch` 块来处理这些错误。