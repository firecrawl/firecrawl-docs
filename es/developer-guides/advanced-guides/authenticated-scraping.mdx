---
title: "Rastreo autenticado"
description: "Aprende a extraer contenido protegido mediante autenticación usando cookies"
---

<Info>
Esta guía te muestra cómo extraer contenido autenticado usando cookies de sesión desde las DevTools de tu navegador. Ideal para herramientas internas, tableros de administración y sistemas autorizados en los que cuentas con credenciales de inicio de sesión.
</Info>

<div id="overview">
  ## Descripción general
</div>

El enfoque recomendado para el scraping autenticado es la **autenticación basada en cookies**, donde:

1. Inicias sesión manualmente en tu aplicación
2. Extraes la cookie de sesión desde DevTools
3. Usas la cookie con Firecrawl para acceder a páginas protegidas

<Note>
**Tiempos de expiración de las cookies:**
- **Herramientas internas**: A menudo 7-30 días o más
- **Sitios web públicos**: Generalmente 1-24 horas
- **Sitios bancarios/sensibles**: 15-30 minutos

Las herramientas internas suelen tener cookies con mayor tiempo de vida, lo que hace que este método sea ideal para tareas de scraping recurrentes.
</Note>

---

<div id="setup">
  ## Configuración
</div>

<Steps>
  <Step title="Obtener la clave de API">
    Obtén tu clave de API de Firecrawl en [firecrawl.dev/app](https://firecrawl.dev/app)
  </Step>

  <Step title="Instalar dependencias">
    ```bash npm
    npm install @mendable/firecrawl-js
    ```

    <Note>
    **Node.js < v20**: Si usas Node.js versión 19 o anterior, también necesitarás instalar `dotenv`:
    ```bash
    npm install dotenv
    ```
    e importarlo con `import 'dotenv/config'` al inicio de tu archivo.
    </Note>
  </Step>

  <Step title="Configurar el entorno">
    Crea un archivo `.env`:
    ```bash .env
    FIRECRAWL_API_KEY=your_firecrawl_api_key
    ```
  </Step>
</Steps>

---

<div id="method-1-cookie-based-authentication">
  ## Método 1: Autenticación basada en cookies
</div>

<div id="step-1-extract-cookies-from-devtools">
  ### Paso 1: Extraer cookies con DevTools
</div>

<Note>
  **Aplicación de demostración**: Puedes practicar con nuestra app de demo en [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app)

  * Correo electrónico: `test@example.com`
  * Contraseña: `password123`
</Note>

<Steps>
  <Step title="Inicia sesión en tu aplicación">
    Ve a [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app) e inicia sesión con las credenciales anteriores
  </Step>

  <Step title="Abre DevTools">
    Presiona `F12` o haz clic derecho → &quot;Inspect&quot;
  </Step>

  <Step title="Ve a la pestaña Application">
    Haz clic en la pestaña **Application** (Chrome) o **Storage** (Firefox)
  </Step>

  <Step title="Busca y copia la cookie">
    1. Despliega **Cookies** en la barra lateral
    2. Haz clic en tu dominio
    3. Busca la cookie `auth-token`
    4. Haz doble clic en **Value** y cópialo

    <img src="/images/guides/dev-tools-cookie.png" alt="Vista de cookies en DevTools" />
  </Step>
</Steps>

Para la app de demo, la cookie se ve así:

```
auth-token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJleGFtcGxlLXVzZXItaWQiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20ifQ.example-signature-hash
```

<Warning>
  **Importante:** Las cookies son credenciales sensibles. Nunca las compartas públicamente ni las subas al control de versiones. Trátalas como contraseñas.
</Warning>


<div id="step-2-use-cookies-with-firecrawl">
  ### Paso 2: Usa cookies con Firecrawl
</div>

```typescript
import FirecrawlApp from "@mendable/firecrawl-js";

const app = new FirecrawlApp({
  apiKey: process.env.FIRECRAWL_API_KEY
});

const result = await app.scrape("https://firecrawl-auth.vercel.app/dashboard", {
  formats: ["markdown", "screenshot"],
  headers: {
    Cookie: 'auth-token=COOKIE_GOES_HERE'
  },
  waitFor: 3000 // Espera 3 segundos a que cargue la página
});

console.log("=== Markdown ===\n" + result.markdown + "\n\n=== URL de Screenshot ===\n" + result.screenshot);
```


<div id="best-practices">
  ## Mejores prácticas
</div>

<CardGroup cols={2}>
  <Card title="Seguridad de cookies" icon="lock">
    - Almacena las cookies en variables de entorno
    - Nunca subas/confirmes cookies al repositorio
    - Rota las cookies con regularidad
    - Usa `.gitignore` para los archivos `.env`
  </Card>

  <Card title="Vencimiento de cookies" icon="clock">
    - Revisa las fechas de vencimiento en DevTools
    - Configura alertas antes del vencimiento
    - Vuelve a extraer las cookies cuando venzan
    - Considera usar autenticación basada en formularios para cookies de corta duración
  </Card>

  <Card title="Limitación de tasa" icon="gauge">
    - Respeta los límites de tasa de la aplicación
    - Agrega demoras entre solicitudes
    - Supervisa errores 429 (Too Many Requests)
    - Usa reintentos con backoff exponencial
  </Card>

  <Card title="Manejo de errores" icon="shield">
    - Revisa errores 401/403 (cookies vencidas)
    - Valida el contenido de la respuesta
    - Registra fallos de autenticación
    - Ten métodos de autenticación alternativos
  </Card>
</CardGroup>

---

<div id="troubleshooting">
  ## Solución de problemas
</div>

<AccordionGroup>
  <Accordion title="Errores 401 Unauthorized" icon="ban">
    **Posibles causas:**
    - La cookie ha caducado
    - La cookie se copió de forma incorrecta
    - La aplicación requiere encabezados adicionales
    - La sesión se invalidó en el servidor

    **Soluciones:**
    - Vuelve a extraer las cookies desde DevTools después de un inicio de sesión nuevo
    - Verifica si necesitas varias cookies (sesión + token CSRF)
    - Comprueba que el dominio de la cookie coincida con la URL de destino
  </Accordion>

  <Accordion title="La cookie no funciona" icon="cookie-bite">
    **Verifica lo siguiente:**
    - ¿El nombre de la cookie es correcto?
    - ¿Copiaste todo el valor de la cookie?
    - ¿La cookie tiene el dominio correcto?
    - ¿Hay una restricción de `Path` en la cookie?
    - ¿Se requieren varias cookies?

    **Consejo práctico:** Copia todas las cookies desde DevTools y prueba con todas; luego elimina una por una para identificar cuáles son necesarias.
  </Accordion>

  <Accordion title="La sesión expira demasiado rápido" icon="hourglass">
    **Para sesiones de corta duración:**
    - Usa autenticación basada en formularios
    - Automatiza el inicio de sesión con acciones
    - Configura un cron para renovar las cookies
    - Considera solicitar sesiones más largas al administrador de tu herramienta interna
  </Accordion>
</AccordionGroup>

<Note>
**Vigencia de las cookies para herramientas internas:** Muchas herramientas internas establecen cookies con vencimientos de 7 a 30 días, lo que las hace ideales para tareas de scraping recurrentes. Revisa el campo `Expires` de tu cookie en DevTools para ver cuánto tiempo sigue siendo válida.
</Note>