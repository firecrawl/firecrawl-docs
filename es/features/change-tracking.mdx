---
title: 'Seguimiento de cambios'
description: 'Firecrawl puede rastrear las diferencias entre la página actual y una versión anterior, y avisarte si hubo una actualización o no'
og:title: "Change tracking | Firecrawl"
sidebarTitle: "Seguimiento de cambios"
og:description: "Firecrawl puede rastrear las diferencias entre la página actual y una versión anterior, y avisarte si hubo una actualización o no"
---

![Seguimiento de cambios](/images/launch-week/lw3d12.webp)

El seguimiento de cambios te permite monitorear y detectar modificaciones en el contenido web a lo largo del tiempo. Esta función está disponible tanto en los SDK de JavaScript como de Python.

<div id="overview">
  ## Descripción general
</div>

El seguimiento de cambios te permite:

- Detectar si una página web ha cambiado desde la última extracción
- Ver los cambios específicos entre extracciones
- Obtener datos estructurados sobre lo que ha cambiado
- Controlar la visibilidad de los cambios

Con el formato `changeTracking`, puedes monitorear cambios en un sitio web y recibir información sobre:

- `previousScrapeAt`: La marca de tiempo de la extracción anterior con la que se compara la página actual (`null` si no hubo una extracción previa)
- `changeStatus`: El resultado de la comparación entre las dos versiones de la página
  - `new`: Esta página no existía o no se había descubierto antes (suele tener `previousScrapeAt` en `null`)
  - `same`: El contenido de esta página no ha cambiado desde la última extracción
  - `changed`: El contenido de esta página ha cambiado desde la última extracción
  - `removed`: Esta página fue eliminada desde la última extracción
- `visibility`: La visibilidad de la página/URL actual
  - `visible`: Esta página es visible, lo que significa que su URL se descubrió por una ruta orgánica (a través de enlaces en otras páginas visibles o del sitemap)
  - `hidden`: Esta página no es visible, lo que significa que aún está disponible en la web, pero ya no es detectable mediante el sitemap o al rastrear el sitio. Solo podemos identificar enlaces invisibles si previamente fueron visibles y se capturaron durante un rastreo o extracción anteriores

<div id="sdks">
  ## SDKs
</div>

<div id="basic-usage">
  ### Uso básico
</div>

Para usar el seguimientoDeCambios, incluye &#39;changeTracking&#39; en los formatos al hacer scraping de una URL:

<CodeGroup>
  ```js Node
  const firecrawl = new Firecrawl({ apiKey: 'your-api-key' });
  const result = await firecrawl.scrape('https://example.com', {
    formats: ['markdown', 'changeTracking']
  });

  // Accede a los datos de seguimiento de cambios
  console.log(result.changeTracking)
  ```

  ```python Python
  from firecrawl import Firecrawl
  from pydantic import BaseModel

  firecrawl = Firecrawl(api_key='your-api-key')
  result = firecrawl.scrape('https://example.com',
      formats=['markdown', 'change_tracking']
  )

  # Accede a los datos de seguimiento de cambios
  print("Change Tracking:", result.change_tracking)
  ```
</CodeGroup>

Respuesta de ejemplo:

```json
{
  "url": "https://firecrawl.dev",
  "markdown": "# Agentes de IA para ofrecer excelentes experiencias al cliente\n\nChatbots que encantan a tus usuarios...",
  "changeTracking": {
    "previousScrapeAt": "2025-04-10T12:00:00Z",
    "changeStatus": "modificado",
    "visibility": "visible"
  }
}
```

<div id="advanced-options">
  ### Opciones avanzadas
</div>

Puedes configurar el seguimiento de cambios pasando un objeto en el array `formats`:

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com', {
  formats: [
    'markdown',
    {
      type: 'changeTracking',
      modes: ['git-diff', 'json'], // Habilita modos específicos de seguimiento de cambios
      schema: {
        type: 'object',
        properties: {
          title: { type: 'string' },
          content: { type: 'string' }
        }
      }, // Esquema para la comparación estructurada de JSON
      prompt: 'Custom prompt for extraction', // Prompt personalizado opcional
      tag: 'production' // Etiqueta opcional para historiales de seguimiento de cambios independientes
    }
  ]
});

// Accede a los cambios en el formato git-diff
if (result.changeTracking.diff) {
  console.log(result.changeTracking.diff.text); // Texto de diff al estilo Git
  console.log(result.changeTracking.diff.json); // Datos de diff estructurados
}

// Accede a los cambios de la comparación JSON
if (result.changeTracking.json) {
  console.log(result.changeTracking.json.title.previous); // Título anterior
  console.log(result.changeTracking.json.title.current); // Título actual
}
```

```python Python
result = firecrawl.scrape('https://example.com',
    formats=[
        'markdown',
        {
            'type': 'change_tracking',
            'modes': ['git-diff', 'json'],  # Habilita modos específicos de seguimiento de cambios
            'schema': {
                'type': 'object',
                'properties': {
                    'title': {'type': 'string'},
                    'content': {'type': 'string'}
                }
            },  # Esquema para la comparación estructurada de JSON
            'prompt': 'Custom prompt for extraction',  # Prompt personalizado opcional
            'tag': 'production'  # Etiqueta opcional para historiales de seguimiento de cambios independientes
        }
    ]
)

# Accede a los cambios en el formato git-diff
if 'diff' in result.change_tracking:
    print(result.change_tracking.diff.text)  # Texto de diff al estilo Git
    print(result.change_tracking.diff.json)  # Datos de diff estructurados

# Accede a los cambios de la comparación JSON
if 'json' in result.change_tracking:
    print(result.change_tracking.json.title.previous)  # Título anterior
    print(result.change_tracking.json.title.current)  # Título actual
```

</CodeGroup>

<div id="git-diff-results-example">
  ### Ejemplo de resultados de git diff:
</div>

```
 **13 de abril de 2025**
 
-**05:55:05 p. m.**
+**05:58:57 p. m.**

...
```

<div id="json-comparison-results-example">
  ### Ejemplo de resultados de comparación de JSON:
</div>

```json
{
  "time": { 
    "previous": "2025-04-13T17:54:32Z", 
    "current": "2025-04-13T17:55:05Z" 
  }
}
```


<div id="data-models">
  ### Modelos de datos
</div>

La funcionalidad de seguimiento de cambios incluye los siguientes modelos de datos:

<CodeGroup>

```js Node
interface FirecrawlDocument {
  // ... otras propiedades
  changeTracking?: {
    previousScrapeAt: string | null;
    changeStatus: "new" | "same" | "changed" | "removed";
    visibility: "visible" | "hidden";
    diff?: {
      text: string;
      json: {
        files: Array<{
          from: string | null;
          to: string | null;
          chunks: Array<{
            content: string;
            changes: Array<{
              type: string;
              normal?: boolean;
              ln?: number;
              ln1?: number;
              ln2?: number;
              content: string;
            }>;
          }>;
        }>;
      };
    };
    json?: any;
  };
}

interface ChangeTrackingFormat {
  type: 'changeTracking';
  prompt?: string;
  schema?: any;
  modes?: ("json" | "git-diff")[];
  tag?: string | null;
}

interface ScrapeParams {
  // ... otras propiedades
  formats?: Array<'markdown' | 'html' | ChangeTrackingFormat>;
}
```

```python Python
class ChangeTrackingData(BaseModel):
    """
    Datos para el formato de seguimiento de cambios.
    """
    previous_scrape_at: Optional[str] = None
    change_status: str  # "new" | "same" | "changed" | "removed"
    visibility: str  # "visible" | "hidden"
    diff: Optional[Dict[str, Any]] = None
    json: Optional[Dict[str, Any]] = None
```

</CodeGroup>

<div id="change-tracking-modes">
  ## Modos de seguimiento de cambios
</div>

La función de seguimiento de cambios admite dos modos:

<div id="git-diff-mode">
  ### Modo Git-Diff
</div>

El modo `git-diff` ofrece un formato de diferencias tradicional, similar a la salida de Git. Muestra los cambios línea por línea con adiciones y eliminaciones señaladas.

Ejemplo de salida:

```
@@ -1,1 +1,1 @@
-contenido antiguo
+contenido nuevo
```

La representación JSON estructurada del diff incluye:

* `files`: Matriz de archivos modificados (en el contexto web, normalmente solo uno)
* `chunks`: Secciones de cambios dentro de un archivo
* `changes`: Cambios de línea individuales con tipo (add, delete, normal)

<div id="json-mode">
  ### Modo JSON
</div>

El modo `json` proporciona una comparación estructurada de campos específicos extraídos del contenido. Esto es útil para hacer un seguimiento de cambios en datos concretos en lugar de hacerlo sobre todo el contenido.

Ejemplo de salida:

```json
{
  "title": {
    "previous": "Old Title",
    "current": "New Title"
  },
  "price": {
    "previous": "$19.99",
    "current": "$24.99"
  }
}
```

Para utilizar el modo JSON, debes proporcionar un esquema que defina los campos que se deben extraer y comparar.


<div id="important-facts">
  ## Datos importantes
</div>

Estos son algunos detalles importantes que debes conocer al usar la función de seguimiento de cambios:

- **Método de comparación**: Las extracciones siempre se comparan mediante su respuesta en markdown.
  - El formato `markdown` también debe especificarse cuando se utiliza el formato `changeTracking`. Se pueden incluir otros formatos adicionalmente.
  - El algoritmo de comparación es resistente a cambios en espacios en blanco y en el orden del contenido. Actualmente se ignoran las URL de origen de iframes para mitigar captchas y antibots con URL aleatorias.

- **Almacenamiento en caché**: Las solicitudes con `changeTracking` omiten la caché de índice, por lo que se ignora el parámetro `maxAge`.

- **Coincidencia con extracciones anteriores**: Las extracciones previas con las que comparar se identifican actualmente por la URL de origen, el ID del equipo, el formato `markdown` y el parámetro `tag`.
  - Para una comparación efectiva, la URL de entrada debe ser exactamente la misma que en la solicitud anterior para el mismo contenido.
  - Rastrear las mismas URL con `includePaths`/`excludePaths` diferentes producirá inconsistencias al usar `changeTracking`.
  - Extraer las mismas URL con `includeTags`/`excludeTags`/`onlyMainContent` diferentes producirá inconsistencias al usar `changeTracking`.
  - Las páginas comparadas también se contrastarán con extracciones previas que solo tengan el formato `markdown` sin el formato `changeTracking`.
  - Las comparaciones se limitan a tu equipo. Si extraes una URL por primera vez con tu clave de API, su `changeStatus` siempre será `new`, incluso si otros usuarios de Firecrawl ya la han extraído antes.

- **Gestión de errores**: Se recomienda monitorear el campo `warning` del documento resultante y manejar la posible ausencia del objeto `changeTracking` en la respuesta.
  - Esto puede ocurrir si la búsqueda en la base de datos para encontrar la extracción anterior con la que comparar excede el tiempo de espera.

<div id="examples">
  ## Ejemplos
</div>

<div id="basic-scrape-example">
  ### Ejemplo básico de scraping
</div>

```json
// Solicitud
{
    "url": "https://firecrawl.dev",
    "formatos": ["markdown", "seguimientoDeCambios"]
}

// Respuesta
{
  "success": true,
  "data": {
    "markdown": "...",
    "metadata": {...},
    "seguimientoDeCambios": {
      "previousScrapeAt": "2025-03-30T15:07:17.543071+00:00",
      "changeStatus": "same",
      "visibility": "visible"
    }
  }
}
```

<div id="crawl-example">
  ### Ejemplo de rastreo
</div>

```json
// Solicitud
{
    "url": "https://firecrawl.dev",
    "scrapeOptions": {
        "formats": ["markdown", "changeTracking"]
    }
}
```


<div id="tracking-product-price-changes">
  ### Seguimiento de cambios en el precio de un producto
</div>

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com/product', {
  formats: [
    'markdown',
    {
      type: 'changeTracking',
      modes: ['json'],
      schema: {
        type: 'object',
        properties: {
          price: { type: 'string' },
          availability: { type: 'string' }
        }
      }
    }
  ]
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log(`Price changed from ${result.changeTracking.json.price.previous} to ${result.changeTracking.json.price.current}`);
}
```

```python Python
result = firecrawl.scrape('https://example.com/product',
    formats=[
        'markdown',
        {
            'type': 'change_tracking',
            'modes': ['json'],
            'schema': {
                'type': 'object',
                'properties': {
                    'price': {'type': 'string'},
                    'availability': {'type': 'string'}
                }
            }
        }
    ]
)

if result.change_tracking.change_status == 'changed':
    print(f"Price changed from {result.change_tracking.json.price.previous} to {result.change_tracking.json.price.current}")
```

</CodeGroup>

<div id="monitoring-content-changes-with-git-diff">
  ### Monitoreo de cambios de contenido con Git-Diff
</div>

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com/blog', {
  formats: [
    'markdown',
    { type: 'changeTracking', modes: ['git-diff'] }
  ]
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log('Cambios en el contenido:');
  console.log(result.changeTracking.diff.text);
}
```

```python Python
result = firecrawl.scrape('https://example.com/blog',
    formats=[
        'markdown',
        { 'type': 'change_tracking', 'modes': ['git-diff'] }
    ]
)

if result.change_tracking.change_status == 'changed':
    print('Cambios en el contenido:')
    print(result.change_tracking.diff.text)
```

</CodeGroup>

<div id="billing">
  ## Facturación
</div>

Usar la funcionalidad básica de seguimientoDeCambios y el modo `git-diff` no tiene costo adicional. Sin embargo, si usas el modo `json` para la comparación de datos estructurados, el raspado de la página costará 5 créditos por página.