---
title: 'Seguimiento de cambios'
description: 'Firecrawl puede detectar cambios entre la página actual y una versión anterior y avisarte si se actualizó o no'
og:title: "Seguimiento de cambios | Firecrawl"
sidebarTitle: "Seguimiento de cambios"
og:description: "Firecrawl puede detectar cambios entre la página actual y una versión anterior y avisarte si se actualizó o no"
---

![Seguimiento de cambios](/images/launch-week/lw3d12.webp)

El seguimiento de cambios te permite supervisar y detectar modificaciones en el contenido web con el tiempo. Esta función está disponible en los SDK de JavaScript y Python.

<div id="overview">
  ## Descripción general
</div>

El seguimientoDeCambios te permite:

- Detectar si una página web ha cambiado desde el último scrape
- Ver los cambios específicos entre scrapes
- Obtener datos estructurados sobre lo que ha cambiado
- Controlar la visibilidad de los cambios

Usando el formato `seguimientoDeCambios`, puedes supervisar cambios en un sitio web y recibir información sobre:

- `previousScrapeAt`: La marca de tiempo del scrape anterior con el que se compara la página actual (`null` si no hubo scrape previo)
- `changeStatus`: El resultado de la comparación entre las dos versiones de la página
  - `new`: Esta página no existía o no se había descubierto antes (suele tener `previousScrapeAt` en `null`)
  - `same`: El contenido de esta página no ha cambiado desde el último scrape
  - `changed`: El contenido de esta página ha cambiado desde el último scrape
  - `removed`: Esta página se eliminó desde el último scrape
- `visibility`: La visibilidad de la página/URL actual
  - `visible`: Esta página es visible, lo que significa que su URL se descubrió por una vía orgánica (a través de enlaces en otras páginas visibles o del sitemap)
  - `hidden`: Esta página no es visible; sigue disponible en la web, pero ya no es detectable mediante el sitemap o el rastreo del sitio. Solo podemos identificar enlaces invisibles si anteriormente fueron visibles y se capturaron durante un rastreo o scrape previos

<div id="javascript-sdk">
  ## SDK de JavaScript
</div>

<div id="basic-usage">
  ### Uso básico
</div>

Para usar el seguimientoDeCambios en el SDK de JavaScript, incluye `'changeTracking'` en el array de formatos al hacer scraping de una URL:

```javascript
const app = new FirecrawlApp({ apiKey: 'your-api-key' });
const result = await app.scrapeUrl('https://example.com', {
  formats: ['markdown', 'changeTracking']
});

// Acceder a los datos de seguimiento de cambios
console.log(result.changeTracking.changeStatus); // 'nuevo', 'sin cambios', 'modificado' o 'eliminado'
console.log(result.changeTracking.visibility); // 'visible' o 'oculto'
console.log(result.changeTracking.previousScrapeAt); // Marca de tiempo ISO de la extracción anterior
```

Ejemplo de respuesta:

```json
{
  "url": "https://firecrawl.dev",
  "markdown": "# Agentes de IA para ofrecer excelentes experiencias del cliente\n\nChatbots que encantan a tus usuarios...",
  "changeTracking": {
    "previousScrapeAt": "2025-04-10T12:00:00Z",
    "changeStatus": "modificado",
    "visibility": "visible"
  }
}
```

<div id="advanced-options">
  ### Opciones avanzadas
</div>

Puedes configurar el seguimiento de cambios mediante opciones adicionales:

```javascript
const result = await app.scrapeUrl('https://example.com', {
  formats: ['markdown', 'changeTracking'],
  changeTrackingOptions: {
    modes: ['git-diff', 'json'], // Enable specific change tracking modes
    schema: { 
      type: 'object', 
      properties: { 
        title: { type: 'string' },
        content: { type: 'string' }
      } 
    }, // Schema for structured JSON comparison
    prompt: 'Custom prompt for extraction', // Optional custom prompt
    tag: 'production' // Etiqueta opcional para historiales separados de seguimiento de cambios
  }
});

// Access git-diff format changes
if (result.changeTracking.diff) {
  console.log(result.changeTracking.diff.text); // Git-style diff text
  console.log(result.changeTracking.diff.json); // Structured diff data
}

// Access JSON comparison changes
if (result.changeTracking.json) {
  console.log(result.changeTracking.json.title.previous); // Previous title
  console.log(result.changeTracking.json.title.current); // Current title
}
```


<div id="git-diff-results-example">
  ### Ejemplo de resultados de Git diff:
</div>

```
 **13 de abril de 2025**
 
-**05:55:05 PM**
+**05:58:57 PM**

...
```


<div id="json-comparison-results-example">
  ### Ejemplo de resultados de comparación de JSON:
</div>

```json
{
  "time": { 
    "previous": "2025-04-13T17:54:32Z", 
    "current": "2025-04-13T17:55:05Z" 
  }
}
```


<div id="typescript-interface">
  ### Interfaz de TypeScript
</div>

La funcionalidad de seguimiento de cambios incluye las siguientes interfaces de TypeScript:

```typescript
interface FirecrawlDocument {
  // ... otras propiedades
  changeTracking?: {
    previousScrapeAt: string | null;
    changeStatus: "new" | "same" | "changed" | "removed";
    visibility: "visible" | "hidden";
    diff?: {
      text: string;
      json: {
        files: Array<{
          from: string | null;
          to: string | null;
          chunks: Array<{
            content: string;
            changes: Array<{
              type: string;
              normal?: boolean;
              ln?: number;
              ln1?: number;
              ln2?: number;
              content: string;
            }>;
          }>;
        }>;
      };
    };
    json?: any;
  };
}

interface ScrapeParams {
  // ... otras propiedades
  changeTrackingOptions?: {
    prompt?: string;
    schema?: any;
    modes?: ("json" | "git-diff")[];
    tag?: string | null;
  }
}
```


<div id="python-sdk">
  ## SDK de Python
</div>

<div id="basic-usage">
  ### Uso básico
</div>

Para usar el seguimientoDeCambios en el SDK de Python, incluye &#39;changeTracking&#39; en la lista de formatos al extraer una URL:

```python
from firecrawl import FirecrawlApp, ChangeTrackingOptions

app = FirecrawlApp(api_key='your-api-key')
result = app.scrape_url('https://example.com',
    formats=['markdown', 'changeTracking']
)

# Acceder a los datos de seguimiento de cambios
print("Estado del cambio:", result.changeTracking.changeStatus)  # 'nuevo', 'igual', 'cambiado' o 'eliminado'
print("Visibilidad:", result.changeTracking.visibility)  # 'visible' o 'oculta'
print("Fecha de raspado anterior:", result.changeTracking.previousScrapeAt)  # Marca de tiempo ISO del raspado anterior
```

<div id="advanced-options">
  ### Opciones avanzadas
</div>

Puedes configurar el seguimiento de cambios mediante opciones adicionales:

```python
result = app.scrape_url('https://example.com',
    formats=['markdown', 'changeTracking'],
    change_tracking_options=ChangeTrackingOptions(
        modes=['git-diff', 'json'],  # Habilitar modos específicos de seguimiento de cambios
        schema={
            'type': 'object',
            'properties': {
                'title': {'type': 'string'},
                'content': {'type': 'string'}
            }
        },  # Esquema para comparación estructurada JSON
        prompt='Custom prompt for extraction',  # Prompt personalizado opcional
        tag='production'  # Etiqueta opcional para historiales de seguimiento de cambios separados
    )
)

# Acceder a cambios en formato git-diff
if 'diff' in result.changeTracking:
    print(result.changeTracking.diff.text)  # Texto diff estilo Git
    print(result.changeTracking.diff.json)  # Datos diff estructurados

# Acceder a cambios de comparación JSON
if 'json' in result.changeTracking:
    print(result.changeTracking.json.title.previous)  # Título anterior
    print(result.changeTracking.json.title.current)  # Título actual
```


<div id="python-data-model">
  ### Modelo de datos en Python
</div>

La funcionalidad de seguimiento de cambios incluye el siguiente modelo de datos en Python:

```python
class ChangeTrackingData(pydantic.BaseModel):
    """
    Datos para el formato de seguimiento de cambios.
    """
    previousScrapeAt: Optional[str] = None
    changeStatus: str  # "new" | "same" | "changed" | "removed"
    visibility: str  # "visible" | "hidden"
    diff: Optional[Dict[str, Any]] = None
    json: Optional[Any] = None
```


<div id="change-tracking-modes">
  ## Modos de seguimientoDeCambios
</div>

La función de seguimientoDeCambios admite dos modos:

<div id="git-diff-mode">
  ### Modo Git-Diff
</div>

El modo `git-diff` ofrece un formato de diff tradicional, similar a la salida de Git. Muestra los cambios línea por línea con las adiciones y eliminaciones resaltadas.

Ejemplo de salida:

```
@@ -1,1 +1,1 @@
-contenido anterior
+contenido nuevo
```

La representación JSON estructurada del diff incluye:

* `files`: Lista de archivos modificados (en el contexto web, normalmente solo uno)
* `chunks`: Secciones de cambios dentro de un archivo
* `changes`: Cambios de línea individuales con tipo (add, delete, normal)

<div id="json-mode">
  ### Modo JSON
</div>

El modo `json` ofrece una comparación estructurada de campos específicos extraídos del contenido. Esto es útil para seguir los cambios en datos concretos en lugar de en todo el contenido.

Ejemplo de salida:

```json
{
  "title": {
    "previous": "Old Title",
    "current": "New Title"
  },
  "price": {
    "previous": "$19.99",
    "current": "$24.99"
  }
}
```

Para utilizar el modo JSON, debes proporcionar un esquema que defina los campos que se deben extraer y comparar.


<div id="important-facts">
  ## Datos importantes
</div>

Estos son algunos detalles importantes que debes conocer al usar la función de seguimiento de cambios:

- **Método de comparación**: Las extracciones siempre se comparan según su respuesta en markdown.
  - El formato `markdown` también debe especificarse al usar el formato `changeTracking`. Además, se pueden incluir otros formatos.
  - El algoritmo de comparación es resistente a cambios en los espacios en blanco y en el orden del contenido. Actualmente se ignoran las URL de origen de los iframes para resistir captchas y antibots con URL aleatorias.

- **Coincidencia con extracciones anteriores**: Las extracciones previas con las que comparar se asocian actualmente por la URL de origen, el ID del equipo, el formato `markdown` y el parámetro `tag`.
  - Para una comparación efectiva, la URL de entrada debe ser exactamente la misma que en la solicitud anterior para el mismo contenido.
  - Rastrear las mismas URL con `includePaths`/`excludePaths` diferentes generará inconsistencias al usar `changeTracking`.
  - Extraer las mismas URL con `includeTags`/`excludeTags`/`onlyMainContent` diferentes generará inconsistencias al usar `changeTracking`.
  - Las páginas comparadas también se contrastarán con extracciones anteriores que solo tengan el formato `markdown` sin el formato `changeTracking`.
  - Las comparaciones se limitan a tu equipo. Si extraes una URL por primera vez con tu clave de API, su `changeStatus` siempre será `new`, incluso si otros usuarios de Firecrawl la han extraído antes.

- **Manejo de errores**: Se recomienda monitorear el campo `warning` del documento resultante y manejar la posible ausencia del objeto `changeTracking` en la respuesta.
  - Esto puede ocurrir cuando la consulta a la base de datos para encontrar la extracción anterior con la cual comparar excede el tiempo de espera.

<div id="examples">
  ## Ejemplos
</div>

<div id="basic-scrape-example">
  ### Ejemplo básico de scraping
</div>

```json
// Solicitud
{
    "url": "https://firecrawl.dev",
    "formats": ["markdown", "seguimientoDeCambios"]
}

// Respuesta
{
  "success": true,
  "data": {
    "markdown": "...",
    "metadata": {...},
    "changeTracking": {
      "previousScrapeAt": "2025-03-30T15:07:17.543071+00:00",
      "changeStatus": "same",
      "visibility": "visible"
    }
  }
}
```

<div id="crawl-example">
  ### Ejemplo de rastreo
</div>

```json
// Solicitud
{
    "url": "https://firecrawl.dev",
    "scrapeOptions": {
        "formats": ["markdown", "changeTracking"]
    }
}
```


<div id="tracking-product-price-changes">
  ### Seguimiento de cambios en precios de productos
</div>

```javascript
// JavaScript
const result = await app.scrapeUrl('https://example.com/product', {
  formatos: ['markdown', 'seguimientoDeCambios'],
  changeTrackingOptions: {
    modes: ['json'],
    schema: {
      type: 'object',
      properties: {
        price: { type: 'string' },
        availability: { type: 'string' }
      }
    }
  }
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log(`Price changed from ${result.changeTracking.json.price.previous} to ${result.changeTracking.json.price.current}`);
}
```

```python
# Python
result = app.scrape_url('https://example.com/product',
    formats=['markdown', 'changeTracking'],
    changeTrackingOptions={
        'modes': ['json'],
        'schema': {
            'type': 'object',
            'properties': {
                'price': {'type': 'string'},
                'availability': {'type': 'string'}
            }
        }
    }
)

if result.changeTracking.changeStatus == 'changed':
    print(f"El precio cambió de {result.changeTracking.json.price.previous} a {result.changeTracking.json.price.current}")
```


<div id="monitoring-content-changes-with-git-diff">
  ### Monitorear cambios de contenido con git-diff
</div>

```javascript
// JavaScript
const result = await app.scrapeUrl('https://example.com/blog', {
  formats: ['markdown', 'changeTracking'],
  changeTrackingOptions: {
    modes: ['git-diff']
  }
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log('Cambios de contenido:');
  console.log(result.changeTracking.diff.text);
}
```

```python
# Python
result = app.scrape_url('https://example.com/blog',
    formats=['markdown', 'changeTracking'],
    changeTrackingOptions={
        'modes': ['git-diff']
    }
)

if result.changeTracking.changeStatus == 'changed':
    print('Cambios en el contenido:')
    print(result.changeTracking.diff.text)
```


<div id="billing">
  ## Facturación
</div>

Usar la funcionalidad básica de seguimientoDeCambios y el modo `git-diff` no tiene costo adicional. Sin embargo, si usas el modo `json` para comparar datos estructurados, el scraping de la página costará 5 créditos por página.