---
title: "セキュリティ"
description: "Webhook の正当性を検証する"
og:title: "Webhook セキュリティ | Firecrawl"
og:description: "Webhook の正当性を検証する"
icon: "shield-check"
---

import WebhookSignatureJS from '/snippets/ja/v2/webhook-signature/js.mdx';
import WebhookSignaturePython from '/snippets/ja/v2/webhook-signature/python.mdx';

Firecrawl はすべての Webhook リクエストに HMAC-SHA256 で署名します。署名を検証することで、リクエストが正当なものであり、改ざんされていないことを確認できます。


<div id="secret-key">
  ## シークレットキー
</div>

webhook シークレットは、アカウント設定の[Advanced タブ](https://www.firecrawl.dev/app/settings?tab=advanced)で確認できます。各アカウントには、すべての webhook リクエストに署名するために使用される固有のシークレットが割り当てられています。

<Warning>
  webhook シークレットは厳重に管理し、決して公開しないでください。漏えいした可能性がある場合は、直ちにアカウント設定から再生成してください。
</Warning>

<div id="signature-verification">
  ## 署名の検証
</div>

各 webhook リクエストには、`X-Firecrawl-Signature` ヘッダーが含まれます：

```
X-Firecrawl-Signature: sha256=abc123def456...
```


<div id="how-to-verify">
  ### 検証方法
</div>

1. `X-Firecrawl-Signature` ヘッダーから署名を取り出す
2. パース前の生のリクエストボディを取得する
3. シークレットキーを使って HMAC-SHA256 を計算する
4. タイミングセーフな比較関数を使って署名を比較する

<div id="implementation">
  ### 実装
</div>

<CodeGroup>

<WebhookSignatureJS />

<WebhookSignaturePython />

</CodeGroup>

<div id="best-practices">
  ## ベストプラクティス
</div>

<div id="always-verify-signatures">
  ### 署名は必ず検証する
</div>

署名を検証せずに webhook を処理してはいけません。

```javascript
app.post('/webhook', (req, res) => {
  if (!verifySignature(req)) {
    return res.status(401).send('認可されていません');
  }
  processWebhook(req.body);
  res.status(200).send('OK');
});
```


<div id="use-timing-safe-comparisons">
  ### タイミングセーフな比較を使う
</div>

標準的な文字列比較はタイミング情報を漏えいするおそれがあります。Node.js では `crypto.timingSafeEqual()` を、Python では `hmac.compare_digest()` を使ってください。

<div id="use-https">
  ### HTTPS を使用する
</div>

ペイロードが通信中も暗号化されるよう、Webhook エンドポイントには必ず HTTPS を使用してください。