---
title: "Scraping authentifié"
description: "Apprenez à extraire du contenu protégé par authentification à l'aide de cookies"
---

<Info>
Ce guide explique comment extraire du contenu authentifié en utilisant les cookies de session depuis les DevTools de votre navigateur. Idéal pour les outils internes, les tableaux de bord d'administration et les systèmes autorisés pour lesquels vous disposez d'identifiants.
</Info>

<div id="overview">
  ## Vue d’ensemble
</div>

L’approche recommandée pour le scraping authentifié est l’**authentification par cookie**, qui consiste à :

1. Vous connecter manuellement à votre application
2. Extraire le cookie de session depuis DevTools
3. Utiliser ce cookie avec Firecrawl pour accéder aux pages protégées

<Note>
**Durées d’expiration des cookies :**
- **Outils internes** : souvent 7 à 30 jours ou plus
- **Sites publics** : généralement 1 à 24 heures
- **Sites bancaires/sensibles** : 15 à 30 minutes

Les outils internes ont généralement des durées de vie de cookie plus longues, ce qui rend cette méthode idéale pour des tâches de scraping récurrentes.
</Note>

---

<div id="setup">
  ## Configuration
</div>

<Steps>
  <Step title="Obtenir votre clé API">
    Récupérez votre clé API Firecrawl sur [firecrawl.dev/app](https://firecrawl.dev/app)
  </Step>

  <Step title="Installer les dépendances">
    ```bash npm
    npm install @mendable/firecrawl-js
    ```

    <Note>
    **Node.js < v20** : Si vous utilisez Node.js 19 ou une version antérieure, vous devrez également installer `dotenv` :
    ```bash
    npm install dotenv
    ```
    puis l’importer au début de votre fichier avec `import 'dotenv/config'`.
    </Note>
  </Step>

  <Step title="Configurer l’environnement">
    Créez un fichier `.env` :
    ```bash .env
    FIRECRAWL_API_KEY=your_firecrawl_api_key
    ```
  </Step>
</Steps>

---

<div id="method-1-cookie-based-authentication">
  ## Méthode 1 : authentification par cookie
</div>

<div id="step-1-extract-cookies-from-devtools">
  ### Étape 1 : Extraire les cookies depuis DevTools
</div>

<Note>
  **Application de démonstration** : vous pouvez vous entraîner avec notre application de démonstration sur [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app)

  * E-mail : `test@example.com`
  * Mot de passe : `password123`
</Note>

<Steps>
  <Step title="Se connecter à votre application">
    Rendez-vous sur [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app) et connectez-vous avec les identifiants ci-dessus
  </Step>

  <Step title="Ouvrir DevTools">
    Appuyez sur `F12` ou faites un clic droit → « Inspecter »
  </Step>

  <Step title="Accéder à l’onglet Application">
    Cliquez sur l’onglet **Application** (Chrome) ou **Storage** (Firefox)
  </Step>

  <Step title="Trouver et copier le cookie">
    1. Développez **Cookies** dans la barre latérale
    2. Cliquez sur votre domaine
    3. Recherchez le cookie `auth-token`
    4. Double-cliquez sur la **valeur** et copiez-la

    <img src="/images/guides/dev-tools-cookie.png" alt="Vue des cookies dans DevTools" />
  </Step>
</Steps>

Pour l’application de démonstration, le cookie ressemble à :

```
auth-token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJleGFtcGxlLXVzZXItaWQiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20ifQ.example-signature-hash
```

<Warning>
  **Important :** Les cookies sont des informations d’authentification sensibles. Ne les partagez jamais publiquement et ne les enregistrez pas dans le système de contrôle de version. Traitez-les comme des mots de passe.
</Warning>


<div id="step-2-use-cookies-with-firecrawl">
  ### Étape 2 : Utiliser des cookies avec Firecrawl
</div>

```typescript
import FirecrawlApp from "@mendable/firecrawl-js";

const app = new FirecrawlApp({
  apiKey: process.env.FIRECRAWL_API_KEY
});

const result = await app.scrape("https://firecrawl-auth.vercel.app/dashboard", {
  formats: ["markdown", "screenshot"],
  headers: {
    Cookie: 'auth-token=COOKIE_GOES_HERE'
  },
  waitFor: 3000 // Attendre 3 secondes le chargement de la page
});

console.log("=== Markdown ===\n" + result.markdown + "\n\n=== URL de la capture d'écran ===\n" + result.screenshot);
```


<div id="best-practices">
  ## Bonnes pratiques
</div>

<CardGroup cols={2}>
  <Card title="Sécurité des cookies" icon="lock">
    - Stockez les cookies dans des variables d’environnement
    - Ne commitez jamais de cookies dans Git
    - Faites tourner/renouvelez les cookies régulièrement
    - Utilisez `.gitignore` pour les fichiers `.env`
  </Card>

  <Card title="Expiration des cookies" icon="clock">
    - Vérifiez les dates d’expiration dans DevTools
    - Configurez des alertes avant l’expiration
    - Ré-extrayez les cookies à leur expiration
    - Envisagez l’authentification par formulaire pour les cookies de courte durée
  </Card>

  <Card title="Limitation de débit" icon="gauge">
    - Respectez les limites de taux de l’application
    - Ajoutez des délais entre les requêtes
    - Surveillez les erreurs 429 (Too Many Requests)
    - Utilisez un backoff exponentiel pour les nouvelles tentatives
  </Card>

  <Card title="Gestion des erreurs" icon="shield">
    - Vérifiez les erreurs 401/403 (cookies expirés)
    - Validez le contenu de la réponse
    - Consignez les échecs d’authentification
    - Prévoyez des méthodes d’authentification de secours
  </Card>
</CardGroup>

---

<div id="troubleshooting">
  ## Dépannage
</div>

<AccordionGroup>
  <Accordion title="Erreurs 401 Unauthorized" icon="ban">
    **Causes possibles :**
    - Le cookie a expiré
    - Le cookie a été copié de manière incorrecte
    - L’application nécessite des en-têtes supplémentaires
    - La session a été invalidée sur le serveur

    **Solutions :**
    - Réextraites les cookies depuis DevTools après une nouvelle connexion
    - Vérifiez si plusieurs cookies sont nécessaires (session + jeton CSRF)
    - Vérifiez que le domaine du cookie correspond à votre URL cible
  </Accordion>

  <Accordion title="Le cookie ne fonctionne pas" icon="cookie-bite">
    **À vérifier :**
    - Le nom du cookie est-il correct ?
    - Avez-vous copié l’intégralité de la valeur du cookie ?
    - Le cookie a-t-il le bon domaine ?
    - Y a-t-il une restriction de `Path` sur le cookie ?
    - Plusieurs cookies sont-ils nécessaires ?

    **Astuce :** Copiez tous les cookies depuis DevTools et testez avec l’ensemble, puis supprimez-les un par un pour identifier ceux qui sont nécessaires.
  </Accordion>

  <Accordion title="La session expire trop rapidement" icon="hourglass">
    **Pour les sessions de courte durée :**
    - Préférez l’authentification par formulaire
    - Automatisez la connexion avec des actions
    - Configurez une tâche cron pour actualiser les cookies
    - Envisagez de demander des durées de session plus longues à l’administrateur de votre outil interne
  </Accordion>
</AccordionGroup>

<Note>
**Durée de vie des cookies pour les outils internes :** De nombreux outils internes définissent des cookies avec une expiration de 7 à 30 jours, ce qui les rend idéaux pour des tâches de scraping récurrentes. Vérifiez le champ `Expires` de votre cookie dans DevTools pour connaître sa durée de validité.
</Note>