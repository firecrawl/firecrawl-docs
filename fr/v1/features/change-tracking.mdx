---
title: 'Suivi des modifications'
description: 'Firecrawl peut suivre les changements entre la page actuelle et une version précédente et indiquer si elle a été mise à jour ou non'
og:title: "Suivi des modifications | Firecrawl"
sidebarTitle: "Suivi des modifications"
og:description: "Firecrawl peut suivre les changements entre la page actuelle et une version précédente et indiquer si elle a été mise à jour ou non"
---

![Suivi des modifications](/images/launch-week/lw3d12.webp)

Le suivi des modifications permet de surveiller et de détecter l’évolution du contenu web dans le temps. Cette fonctionnalité est disponible dans les SDK JavaScript et Python.

<div id="overview">
  ## Vue d’ensemble
</div>

Le suiviDesModifications vous permet de :

- Détecter si une page web a changé depuis le dernier scrape
- Voir les changements spécifiques entre les scrapes
- Obtenir des données structurées sur ce qui a changé
- Contrôler la visibilité des changements

En utilisant le format `changeTracking`, vous pouvez surveiller les changements sur un site web et recevoir des informations sur :

- `previousScrapeAt` : l’horodatage du scrape précédent auquel la page actuelle est comparée (`null` s’il n’y a pas eu de scrape précédent)
- `changeStatus` : le résultat de la comparaison entre les deux versions de la page
  - `new` : cette page n’existait pas ou n’avait pas été découverte auparavant (a généralement un `previousScrapeAt` à `null`)
  - `same` : le contenu de cette page n’a pas changé depuis le dernier scrape
  - `changed` : le contenu de cette page a changé depuis le dernier scrape
  - `removed` : cette page a été supprimée depuis le dernier scrape
- `visibility` : la visibilité de la page/URL actuelle
  - `visible` : cette page est visible, ce qui signifie que son URL a été découverte par une voie organique (via des liens sur d’autres pages visibles ou le sitemap)
  - `hidden` : cette page n’est pas visible, ce qui signifie qu’elle est toujours disponible sur le web, mais n’est plus découvrable via le sitemap ou l’exploration du site. Nous ne pouvons identifier les liens invisibles que s’ils ont déjà été visibles et capturés lors d’un crawl ou d’un scrape précédent

<div id="javascript-sdk">
  ## SDK JavaScript
</div>

<div id="basic-usage">
  ### Utilisation de base
</div>

Pour activer le suivi des modifications dans le SDK JavaScript, ajoutez `'changeTracking'` au tableau formats lors du scraping d’une URL :

```javascript
const app = new FirecrawlApp({ apiKey: 'votre-clé-API' });
const result = await app.scrapeUrl('https://example.com', {
  formats: ['markdown', 'changeTracking']
});

// Accéder aux données de suivi des modifications
console.log(result.changeTracking.changeStatus); // 'new', 'same', 'changed' ou 'removed'
console.log(result.changeTracking.visibility); // 'visible' ou 'hidden'
console.log(result.changeTracking.previousScrapeAt); // Horodatage ISO du précédent scan
```

Exemple de réponse :

```json
{
  "url": "https://firecrawl.dev",
  "markdown": "# Agents IA pour offrir d’excellentes expériences client\n\nDes chatbots qui enchantent vos utilisateurs...",
  "changeTracking": {
    "previousScrapeAt": "2025-04-10T12:00:00Z",
    "changeStatus": "changed",
    "visibility": "visible"
  }
}
```

<div id="advanced-options">
  ### Options avancées
</div>

Vous pouvez configurer le suivi des modifications avec des options supplémentaires :

```javascript
const result = await app.scrapeUrl('https://example.com', {
  formats: ['markdown', 'changeTracking'],
  changeTrackingOptions: {
    modes: ['git-diff', 'json'], // Activer des modes spécifiques de suivi des modifications
    schema: { 
      type: 'object', 
      properties: { 
        title: { type: 'string' },
        content: { type: 'string' }
      } 
    }, // Schéma pour la comparaison JSON structurée
    prompt: 'Invite personnalisée pour l’extraction', // Invite personnalisée optionnelle
    tag: 'production' // Étiquette optionnelle pour maintenir des historiques de suivi distincts
  }
});

// Consulter les modifications au format git-diff
if (result.changeTracking.diff) {
  console.log(result.changeTracking.diff.text); // Texte de diff au format Git
  console.log(result.changeTracking.diff.json); // Données de diff structurées
}

// Consulter les modifications de la comparaison JSON
if (result.changeTracking.json) {
  console.log(result.changeTracking.json.title.previous); // Titre précédent
  console.log(result.changeTracking.json.title.current); // Titre actuel
}
```

<div id="git-diff-results-example">
  ### Exemple de résultats de Git-Diff :
</div>

```
 **13 avril 2025**
 
-**17:55:05**
+**17:58:57**

...
```

<div id="json-comparison-results-example">
  ### Exemple de résultats de comparaison JSON :
</div>

```json
{
  "time": { 
    "previous": "2025-04-13T17:54:32Z", 
    "current": "2025-04-13T17:55:05Z" 
  }
}
```

<div id="typescript-interface">
  ### Interface TypeScript
</div>

La fonctionnalité de suivi des modifications comprend les interfaces TypeScript suivantes :

```typescript
interface FirecrawlDocument {
  // ... autres propriétés
  changeTracking?: {
    previousScrapeAt: string | null;
    changeStatus: "nouveau" | "identique" | "modifié" | "supprimé";
    visibility: "visible" | "masqué";
    diff?: {
      text: string;
      json: {
        files: Array<{
          from: string | null;
          to: string | null;
          chunks: Array<{
            content: string;
            changes: Array<{
              type: string;
              normal?: boolean;
              ln?: number;
              ln1?: number;
              ln2?: number;
              content: string;
            }>;
          }>;
        }>;
      };
    };
    json?: any;
  };
}

interface ScrapeParams {
  // ... autres propriétés
  changeTrackingOptions?: {
    prompt?: string;
    schema?: any;
    modes?: ("json" | "git-diff")[];
    tag?: string | null;
  }
}
```

<div id="python-sdk">
  ## SDK Python
</div>

<div id="basic-usage">
  ### Utilisation de base
</div>

Pour activer le suivi des modifications dans le SDK Python, ajoutez &quot;suiviDesModifications&quot; à la liste des formats lors du scraping d’une URL :

```python
from firecrawl import FirecrawlApp, ChangeTrackingOptions

app = FirecrawlApp(api_key='your-api-key')
result = app.scrape_url('https://example.com',
    formats=['markdown', 'changeTracking']
)

# Accéder aux données de suivi des modifications
print("Statut des modifications :", result.changeTracking.changeStatus)  # « new », « same », « changed » ou « removed »
print("Visibilité :", result.changeTracking.visibility)  # « visible » ou « hidden »
print("Date de l’extraction précédente :", result.changeTracking.previousScrapeAt)  # Horodatage ISO de l’extraction précédente
```

<div id="advanced-options">
  ### Options avancées
</div>

Vous pouvez configurer le suivi des modifications avec des options supplémentaires :

```python
result = app.scrape_url('https://example.com',
    formats=['markdown', 'changeTracking'],
    change_tracking_options=ChangeTrackingOptions(
        modes=['git-diff', 'json'],  # Activer des modes spécifiques de suivi des modifications
        schema={
            'type': 'object',
            'properties': {
                'title': {'type': 'string'},
                'content': {'type': 'string'}
            }
        },  # Schéma pour la comparaison JSON structurée
        prompt='Invite personnalisée pour l’extraction',  # Invite personnalisée optionnelle
        tag='production'  # Étiquette optionnelle pour des historiques de suivi des modifications distincts
    )
)

# Accéder aux modifications au format git-diff
if 'diff' in result.changeTracking:
    print(result.changeTracking.diff.text)  # Texte de diff au format Git
    print(result.changeTracking.diff.json)  # Données de diff structurées

# Accéder aux modifications de la comparaison JSON
if 'json' in result.changeTracking:
    print(result.changeTracking.json.title.previous)  # Titre précédent
    print(result.changeTracking.json.title.current)  # Titre actuel
```

<div id="python-data-model">
  ### Modèle de données Python
</div>

La fonction de suivi des modifications comprend le modèle de données Python suivant :

```python
class ChangeTrackingData(pydantic.BaseModel):
    """
    Données pour le format de suivi des modifications.
    """
    previousScrapeAt: Optional[str] = None
    changeStatus: str  # "nouveau" | "identique" | "modifié" | "supprimé"
    visibility: str  # "visible" | "masqué"
    diff: Optional[Dict[str, Any]] = None
    json: Optional[Any] = None
```

<div id="change-tracking-modes">
  ## Modes de suivi des modifications
</div>

La fonction de suivi des modifications prend en charge deux modes :

<div id="git-diff-mode">
  ### Mode git-diff
</div>

Le mode `git-diff` propose un format de diff classique, similaire à la sortie de Git. Il affiche les changements ligne par ligne, avec les ajouts et suppressions signalés.

Exemple de sortie :

```
@@ -1,1 +1,1 @@
-ancien contenu
+nouveau contenu
```

La représentation JSON structurée du diff comprend :

* `files` : tableau des fichiers modifiés (dans un contexte web, généralement un seul)
* `chunks` : sections de modifications dans un fichier
* `changes` : modifications de lignes individuelles avec un type (add, delete, normal)

<div id="json-mode">
  ### Mode JSON
</div>

Le mode `json` fournit une comparaison structurée de champs spécifiques extraits du contenu. C’est utile pour suivre les changements de points de données précis plutôt que de l’intégralité du contenu.

Exemple de sortie :

```json
{
  "title": {
    "previous": "Ancien titre",
    "current": "Nouveau titre"
  },
  "price": {
    "previous": "19,99 $",
    "current": "24,99 $"
  }
}
```

Pour utiliser le mode JSON, vous devez fournir un schéma qui définit les champs à extraire et à comparer.

<div id="important-facts">
  ## Faits importants
</div>

Voici quelques points clés à connaître lors de l’utilisation de la fonctionnalité de suivi des modifications :

- **Méthode de comparaison** : Les scrapes sont toujours comparés à partir de leur réponse en markdown.
  - Le format `markdown` doit également être spécifié lorsque vous utilisez le format `suiviDesModifications`. D’autres formats peuvent être ajoutés en complément.
  - L’algorithme de comparaison est robuste face aux variations d’espaces et à l’ordre du contenu. Les URL source d’iframe sont actuellement ignorées afin de résister aux captchas et aux antibots qui utilisent des URL aléatoires.

- **Appariement avec les scrapes précédents** : Les scrapes précédents utilisés pour la comparaison sont actuellement appariés selon l’URL source, l’ID d’équipe, le format `markdown` et le paramètre `tag`.
  - Pour une comparaison efficace, l’URL fournie doit être exactement la même que lors de la requête précédente pour le même contenu.
  - Explorer les mêmes URL avec des `includePaths`/`excludePaths` différents entraînera des incohérences avec `suiviDesModifications`.
  - Scraper les mêmes URL avec des `includeTags`/`excludeTags`/`onlyMainContent` différents entraînera des incohérences avec `suiviDesModifications`.
  - Les pages seront également comparées aux scrapes précédents qui ne disposaient que du format `markdown`, sans le format `suiviDesModifications`.
  - Les comparaisons sont limitées à votre équipe. Si vous scrapez une URL pour la première fois avec votre clé API, son `changeStatus` sera toujours `new`, même si d’autres utilisateurs de Firecrawl l’ont déjà scrapée.

- **Statut bêta** : Pendant la bêta, il est recommandé de surveiller le champ `warning` du document résultant et de gérer le cas où l’objet `suiviDesModifications` pourrait être absent de la réponse.
  - Cela peut se produire si la recherche en base de données du scrape précédent à comparer dépasse le délai imparti.

<div id="examples">
  ## Exemples
</div>

<div id="basic-scrape-example">
  ### Exemple de scraping simple
</div>

```json
// Requête
{
    "url": "https://firecrawl.dev",
    "formats": ["markdown", "changeTracking"]
}

// Réponse
{
  "success": true,
  "data": {
    "markdown": "...",
    "metadata": {...},
    "changeTracking": {
      "previousScrapeAt": "2025-03-30T15:07:17.543071+00:00",
      "changeStatus": "identique",
      "visibility": "visible"
    }
  }
}
```

<div id="crawl-example">
  ### Exemple d’exploration
</div>

```json
// Requête
{
    "url": "https://firecrawl.dev",
    "scrapeOptions": {
        "formats": ["markdown", "suiviDesModifications"]
    }
}
```

<div id="tracking-product-price-changes">
  ### Suivi des variations de prix des produits
</div>

```javascript
// JavaScript
const result = await app.scrapeUrl('https://example.com/product', {
  formats: ['markdown', 'changeTracking'],
  changeTrackingOptions: {
    modes: ['json'],
    schema: {
      type: 'object',
      properties: {
        price: { type: 'string' },
        availability: { type: 'string' }
      }
    }
  }
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log(`Le prix est passé de ${result.changeTracking.json.price.previous} à ${result.changeTracking.json.price.current}`);
}
```

```python
# Python
result = app.scrape_url('https://example.com/product',
    formats=['markdown', 'changeTracking'],
    changeTrackingOptions={
        'modes': ['json'],
        'schema': {
            'type': 'object',
            'properties': {
                'price': {'type': 'string'},
                'availability': {'type': 'string'}
            }
        }
    }
)

if result.changeTracking.changeStatus == 'changed':
    print(f"Le prix est passé de {result.changeTracking.json.price.previous} à {result.changeTracking.json.price.current}")
```

<div id="monitoring-content-changes-with-git-diff">
  ### Suivi des modifications de contenu avec git-diff
</div>

```javascript
// JavaScript
const result = await app.scrapeUrl('https://example.com/blog', {
  formats: ['markdown', 'changeTracking'],
  changeTrackingOptions: {
    modes: ['git-diff']
  }
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log('Modifications du contenu :');
  console.log(result.changeTracking.diff.text);
}
```

```python
# Python
result = app.scrape_url('https://example.com/blog',
    formats=['markdown', 'changeTracking'],
    changeTrackingOptions={
        'modes': ['git-diff']
    }
)

if result.changeTracking.changeStatus == 'changed':
    print('Modifications du contenu :')
    print(result.changeTracking.diff.text)
```

<div id="billing">
  ## Facturation
</div>

La fonctionnalité de suivi des modifications est actuellement en bêta. L’utilisation des fonctionnalités de base du suivi des modifications et du mode `git-diff` n’entraîne aucun coût supplémentaire. En revanche, si vous utilisez le mode `json` pour comparer des données structurées, le scraping de la page coûtera 5 crédits par page.