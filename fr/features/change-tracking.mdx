---
title: 'Suivi des modifications'
description: 'Firecrawl peut suivre les changements entre la page actuelle et une version précédente et indiquer si elle a été mise à jour ou non'
og:title: "Suivi des modifications | Firecrawl"
sidebarTitle: "Suivi des modifications"
og:description: "Firecrawl peut suivre les changements entre la page actuelle et une version précédente et indiquer si elle a été mise à jour ou non"
---

![Suivi des modifications](/images/launch-week/lw3d12.webp)

Le suivi des modifications vous permet de surveiller et de détecter les changements dans le contenu web au fil du temps. Cette fonctionnalité est disponible dans les SDK JavaScript et Python.

<div id="overview">
  ## Vue d’ensemble
</div>

Le suivi des modifications vous permet de :

- Détecter si une page web a changé depuis le dernier scrape
- Voir les changements précis entre les scrapes
- Obtenir des données structurées sur ce qui a changé
- Contrôler la visibilité des changements

En utilisant le format `suiviDesModifications`, vous pouvez surveiller les changements sur un site web et recevoir des informations sur :

- `previousScrapeAt` : l’horodatage du scrape précédent auquel la page actuelle est comparée (`null` s’il n’y a pas eu de scrape précédent)
- `changeStatus` : le résultat de la comparaison entre les deux versions de la page
  - `new` : cette page n’existait pas ou n’avait pas été découverte auparavant (a généralement un `previousScrapeAt` à `null`)
  - `same` : le contenu de cette page n’a pas changé depuis le dernier scrape
  - `changed` : le contenu de cette page a changé depuis le dernier scrape
  - `removed` : cette page a été supprimée depuis le dernier scrape
- `visibility` : la visibilité de la page/URL actuelle
  - `visible` : cette page est visible, ce qui signifie que son URL a été découverte par une voie organique (via des liens sur d’autres pages visibles ou le sitemap)
  - `hidden` : cette page n’est pas visible, ce qui signifie qu’elle est toujours accessible sur le web, mais n’est plus découvrable via le sitemap ou l’exploration du site. Nous ne pouvons identifier des liens invisibles que s’ils avaient été visibles, et capturés, lors d’un crawl ou d’un scrape précédent

<div id="sdks">
  ## SDKs
</div>

<div id="basic-usage">
  ### Utilisation de base
</div>

Pour utiliser le suivi des modifications, incluez « suiviDesModifications » dans les formats lors du scraping d’une URL :

<CodeGroup>
  ```js Node
  const firecrawl = new Firecrawl({ apiKey: 'your-api-key' });
  const result = await firecrawl.scrape('https://example.com', {
    formats: ['markdown', 'changeTracking']
  });

  // Accéder aux données de suivi des modifications
  console.log(result.changeTracking)
  ```

  ```python Python
  from firecrawl import Firecrawl
  from pydantic import BaseModel

  firecrawl = Firecrawl(api_key='your-api-key')
  result = firecrawl.scrape('https://example.com',
      formats=['markdown', 'change_tracking']
  )

  # Accéder aux données de suivi des modifications
  print("Change Tracking:", result.change_tracking)
  ```
</CodeGroup>

Exemple de réponse :

```json
{
  "url": "https://firecrawl.dev",
  "markdown": "# Agents IA pour offrir d’excellentes expériences client\n\nDes chatbots qui enchantent vos utilisateurs...",
  "changeTracking": {
    "previousScrapeAt": "2025-04-10T12:00:00Z",
    "changeStatus": "changé",
    "visibility": "visible"
  }
}
```

<div id="advanced-options">
  ### Options avancées
</div>

Vous pouvez configurer le suivi des modifications en passant un objet dans le tableau `formats` :

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com', {
  formats: [
    'markdown',
    {
      type: 'changeTracking',
      modes: ['git-diff', 'json'], // Activer des modes spécifiques de suivi des modifications
      schema: {
        type: 'object',
        properties: {
          title: { type: 'string' },
          content: { type: 'string' }
        }
      }, // Schéma pour une comparaison JSON structurée
      prompt: 'Invite personnalisée pour l’extraction', // Invite personnalisée optionnelle
      tag: 'production' // Tag optionnel pour des historiques de suivi des modifications séparés
    }
  ]
});

// Accéder aux modifications au format git-diff
if (result.changeTracking.diff) {
  console.log(result.changeTracking.diff.text); // Texte de diff au format Git
  console.log(result.changeTracking.diff.json); // Données de diff structurées
}

// Accéder aux modifications de comparaison JSON
if (result.changeTracking.json) {
  console.log(result.changeTracking.json.title.previous); // Titre précédent
  console.log(result.changeTracking.json.title.current); // Titre actuel
}
```

```python Python
result = firecrawl.scrape('https://example.com',
    formats=[
        'markdown',
        {
            'type': 'change_tracking',
            'modes': ['git-diff', 'json'],  # Activer des modes spécifiques de suivi des modifications
            'schema': {
                'type': 'object',
                'properties': {
                    'title': {'type': 'string'},
                    'content': {'type': 'string'}
                }
            },  # Schéma pour une comparaison JSON structurée
            'prompt': 'Invite personnalisée pour l’extraction',  # Invite personnalisée optionnelle
            'tag': 'production'  # Tag optionnel pour des historiques de suivi des modifications séparés
        }
    ]
)

# Accéder aux modifications au format git-diff
if 'diff' in result.change_tracking:
    print(result.change_tracking.diff.text)  # Texte de diff au format Git
    print(result.change_tracking.diff.json)  # Données de diff structurées

# Accéder aux modifications de comparaison JSON
if 'json' in result.change_tracking:
    print(result.change_tracking.json.title.previous)  # Titre précédent
    print(result.change_tracking.json.title.current)  # Titre actuel
```

</CodeGroup>

<div id="git-diff-results-example">
  ### Exemple de résultats Git‑diff :
</div>

```
 **13 avril 2025**
 
-**17:55:05**
+**17:58:57**

...
```

<div id="json-comparison-results-example">
  ### Exemple de résultats de comparaison JSON :
</div>

```json
{
  "time": { 
    "previous": "2025-04-13T17:54:32Z", 
    "current": "2025-04-13T17:55:05Z" 
  }
}
```


<div id="data-models">
  ### Modèles de données
</div>

La fonctionnalité de suivi des modifications comprend les modèles de données suivants :

<CodeGroup>

```js Node
interface FirecrawlDocument {
  // ... autres propriétés
  changeTracking?: {
    previousScrapeAt: string | null;
    changeStatus: "new" | "same" | "changed" | "removed";
    visibility: "visible" | "hidden";
    diff?: {
      text: string;
      json: {
        files: Array<{
          from: string | null;
          to: string | null;
          chunks: Array<{
            content: string;
            changes: Array<{
              type: string;
              normal?: boolean;
              ln?: number;
              ln1?: number;
              ln2?: number;
              content: string;
            }>;
          }>;
        }>;
      };
    };
    json?: any;
  };
}

interface ChangeTrackingFormat {
  type: 'changeTracking';
  prompt?: string;
  schema?: any;
  modes?: ("json" | "git-diff")[];
  tag?: string | null;
}

interface ScrapeParams {
  // ... autres propriétés
  formats?: Array<'markdown' | 'html' | ChangeTrackingFormat>;
}
```

```python Python
class ChangeTrackingData(BaseModel):
    """
    Données pour le format de suivi des modifications.
    """
    previous_scrape_at: Optional[str] = None
    change_status: str  # "new" | "same" | "changed" | "removed"
    visibility: str  # "visible" | "hidden"
    diff: Optional[Dict[str, Any]] = None
    json: Optional[Dict[str, Any]] = None
```

</CodeGroup>

<div id="change-tracking-modes">
  ## Modes de suivi des modifications
</div>

La fonctionnalité de suivi des modifications prend en charge deux modes :

<div id="git-diff-mode">
  ### Mode Git-Diff
</div>

Le mode `git-diff` propose un format de diff classique, similaire à la sortie de Git. Il affiche les changements ligne par ligne, avec les ajouts et suppressions clairement signalés.

Exemple de sortie :

```
@@ -1,1 +1,1 @@
-ancien contenu
+nouveau contenu
```

La représentation JSON structurée du diff comprend :

* `files` : tableau des fichiers modifiés (dans un contexte web, généralement un seul)
* `chunks` : sections de modifications à l’intérieur d’un fichier
* `changes` : modifications de lignes individuelles avec type (add, delete, normal)

<div id="json-mode">
  ### Mode JSON
</div>

Le mode `json` fournit une comparaison structurée de champs spécifiques extraits du contenu. Il est utile pour suivre l’évolution de points de données précis plutôt que de l’intégralité du contenu.

Exemple de résultat :

```json
{
  "title": {
    "previous": "Old Title",
    "current": "New Title"
  },
  "price": {
    "previous": "$19.99",
    "current": "$24.99"
  }
}
```

Pour utiliser le mode JSON, vous devez fournir un schéma définissant les champs à extraire et à comparer.


<div id="important-facts">
  ## Faits importants
</div>

Voici quelques points essentiels à connaître lors de l’utilisation de la fonctionnalité de suiviDesModifications :

- **Méthode de comparaison** : Les extractions sont toujours comparées à partir de leur réponse en markdown.
  - Le format `markdown` doit également être spécifié lorsque vous utilisez le format `suiviDesModifications` (`changeTracking`). D’autres formats peuvent être ajoutés en complément.
  - L’algorithme de comparaison est tolérant aux variations d’espaces et à l’ordre du contenu. Les URL sources des iframes sont actuellement ignorées afin de mieux gérer les captchas et les antibots qui génèrent des URL aléatoires.

- **Correspondance avec les extractions précédentes** : Les extractions précédentes utilisées pour la comparaison sont actuellement appariées sur l’URL source, l’ID d’équipe, le format `markdown` et le paramètre `tag`.
  - Pour une comparaison fiable, l’URL fournie doit être exactement la même que lors de la requête précédente visant le même contenu.
  - Explorer les mêmes URL avec des `includePaths`/`excludePaths` différents entraînera des incohérences avec `suiviDesModifications`.
  - Scraper les mêmes URL avec des `includeTags`/`excludeTags`/`onlyMainContent` différents entraînera des incohérences avec `suiviDesModifications`.
  - Les pages seront également comparées à des extractions précédentes qui n’avaient que le format `markdown`, sans le format `suiviDesModifications`.
  - Les comparaisons sont limitées à votre équipe. Si vous scrapez une URL pour la première fois avec votre clé API, son `changeStatus` sera toujours `new`, même si d’autres utilisateurs de Firecrawl l’ont déjà traitée auparavant.

- **Gestion des erreurs** : Il est recommandé de surveiller le champ `warning` du document résultant et de prendre en compte l’éventuelle absence de l’objet `suiviDesModifications` dans la réponse.
  - Cela peut se produire si la recherche en base de données du précédent scrape à comparer arrive à expiration.

<div id="examples">
  ## Exemples
</div>

<div id="basic-scrape-example">
  ### Exemple de scraping simple
</div>

```json
// Requête
{
    "url": "https://firecrawl.dev",
    "formats": ["markdown", "suiviDesModifications"]
}

// Réponse
{
  "success": true,
  "data": {
    "markdown": "...",
    "metadata": {...},
    "suiviDesModifications": {
      "previousScrapeAt": "2025-03-30T15:07:17.543071+00:00",
      "changeStatus": "identique",
      "visibility": "visible"
    }
  }
}
```

<div id="crawl-example">
  ### Exemple de crawl
</div>

```json
// Requête
{
    "url": "https://firecrawl.dev",
    "scrapeOptions": {
        "formats": ["markdown", "changeTracking"]
    }
}
```


<div id="tracking-product-price-changes">
  ### Suivi des changements de prix d’un produit
</div>

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com/product', {
  formats: [
    'markdown',
    {
      type: 'changeTracking',
      modes: ['json'],
      schema: {
        type: 'object',
        properties: {
          price: { type: 'string' },
          availability: { type: 'string' }
        }
      }
    }
  ]
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log(`Price changed from ${result.changeTracking.json.price.previous} to ${result.changeTracking.json.price.current}`);
}
```

```python Python
result = firecrawl.scrape('https://example.com/product',
    formats=[
        'markdown',
        {
            'type': 'change_tracking',
            'modes': ['json'],
            'schema': {
                'type': 'object',
                'properties': {
                    'price': {'type': 'string'},
                    'availability': {'type': 'string'}
                }
            }
        }
    ]
)

if result.change_tracking.change_status == 'changed':
    print(f"Price changed from {result.change_tracking.json.price.previous} to {result.change_tracking.json.price.current}")
```

</CodeGroup>

<div id="monitoring-content-changes-with-git-diff">
  ### Suivre les modifications de contenu avec Git-Diff
</div>

<CodeGroup>

```js Node
const result = await firecrawl.scrape('https://example.com/blog', {
  formats: [
    'markdown',
    { type: 'changeTracking', modes: ['git-diff'] }
  ]
});

if (result.changeTracking.changeStatus === 'changed') {
  console.log('Modifications du contenu :');
  console.log(result.changeTracking.diff.text);
}
```

```python Python
result = firecrawl.scrape('https://example.com/blog',
    formats=[
        'markdown',
        { 'type': 'change_tracking', 'modes': ['git-diff'] }
    ]
)

if result.change_tracking.change_status == 'changed':
    print('Modifications du contenu :')
    print(result.change_tracking.diff.text)
```

</CodeGroup>

<div id="billing">
  ## Facturation
</div>

L’utilisation des fonctionnalités de base de suivi des modifications et du mode `git-diff` n’entraîne aucun coût supplémentaire. En revanche, si vous utilisez le mode `json` pour comparer des données structurées, l’extraction de la page coûtera 5 crédits par page.