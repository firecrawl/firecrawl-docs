---
title: "Raspagem autenticada"
description: "Aprenda a extrair conteúdo protegido por autenticação usando cookies"
---

<Warning>
**Importante:** Use a raspagem autenticada apenas em sistemas nos quais você tenha permissão explícita de ambas as partes (você e o proprietário da plataforma), como ferramentas internas, auto-hospedadas, ou recursos que você controla integralmente. Não use autenticação em plataformas a menos que tenha certeza de que ela está em conformidade com os Termos e Condições do site e obtenha permissão por escrito em caso de dúvida. O uso inadequado de cookies de sessão pode violar os termos de serviço ou leis; sempre confirme que você está autorizado a acessar conteúdo protegido dessa forma.
</Warning>

<div id="overview">
  ## Visão geral
</div>

A abordagem recomendada para scraping autenticado é a **autenticação baseada em cookies**, em que você:

1. Faz login manualmente no seu aplicativo
2. Extrai o cookie de sessão pelo DevTools
3. Usa o cookie com o Firecrawl para acessar páginas protegidas

<Note>
**Prazos de expiração de cookies:**
- **Ferramentas internas**: Geralmente de 7 a 30 dias ou mais
- **Outras ferramentas**: Geralmente em horas ou minutos

Ferramentas internas costumam ter cookies com maior vida útil, tornando esse método ideal para tarefas recorrentes de scraping.
</Note>

---

<div id="setup">
  ## Configuração
</div>

<Steps>
  <Step title="Obter a chave de API">
    Obtenha sua chave de API do Firecrawl em [firecrawl.dev/app](https://firecrawl.dev/app)
  </Step>

  <Step title="Instalar dependências">
    ```bash npm
    npm install @mendable/firecrawl-js
    ```

    <Note>
    **Node.js < v20**: Se você estiver usando a versão 19 ou anterior do Node.js, também será necessário instalar `dotenv`:
    ```bash
    npm install dotenv
    ```
    E importá-lo com `import 'dotenv/config'` no início do seu arquivo.
    </Note>
  </Step>

  <Step title="Configurar ambiente">
    Crie um arquivo `.env`:
    ```bash .env
    FIRECRAWL_API_KEY=your_firecrawl_api_key
    ```
  </Step>
</Steps>

---

<div id="method-1-cookie-based-authentication">
  ## Método 1: Autenticação baseada em cookie
</div>

<div id="step-1-extract-cookies-from-devtools">
  ### Etapa 1: Extrair cookies pelo DevTools
</div>

<Note>
  **Aplicativo de demonstração**: Você pode praticar com nosso app de demonstração em [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app)

  * E-mail: `test@example.com`
  * Senha: `password123`
</Note>

<Steps>
  <Step title="Fazer login no seu aplicativo">
    Acesse [https://firecrawl-auth.vercel.app](https://firecrawl-auth.vercel.app) e faça login com as credenciais acima
  </Step>

  <Step title="Abrir o DevTools">
    Pressione `F12` ou clique com o botão direito → &quot;Inspecionar&quot;
  </Step>

  <Step title="Ir até a guia Application">
    Clique na guia **Application** (Chrome) ou **Storage** (Firefox)
  </Step>

  <Step title="Encontrar e copiar o cookie">
    1. Expanda **Cookies** na barra lateral
    2. Clique no seu domínio
    3. Encontre o cookie `auth-token`
    4. Dê um duplo clique no campo **Value** e copie

    <img src="/images/guides/dev-tools-cookie.png" alt="Visualização de cookies no DevTools" />
  </Step>
</Steps>

No app de demonstração, o cookie é semelhante a:

```
auth-token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJleGFtcGxlLXVzZXItaWQiLCJlbWFpbCI6InRlc3RAZXhhbXBsZS5jb20ifQ.example-signature-hash
```

<Warning>
  **Importante:** Cookies são credenciais sensíveis. Nunca as compartilhe publicamente nem as versione em controle de código. Trate-os como senhas.
</Warning>


<div id="step-2-use-cookies-with-firecrawl">
  ### Etapa 2: Usar cookies com o Firecrawl
</div>

```typescript
import FirecrawlApp from "@mendable/firecrawl-js";

const app = new FirecrawlApp({
  apiKey: process.env.FIRECRAWL_API_KEY
});

const result = await app.scrape("https://firecrawl-auth.vercel.app/dashboard", {
  formats: ["markdown", "screenshot"],
  headers: {
    Cookie: 'auth-token=COOKIE_GOES_HERE'
  },
  waitFor: 3000 // Aguarda 3 segundos para o carregamento da página
});

console.log("=== Markdown ===\n" + result.markdown + "\n\n=== URL da Captura de Tela ===\n" + result.screenshot);
```


<div id="best-practices">
  ## Melhores práticas
</div>

<CardGroup cols={2}>
  <Card title="Segurança de cookies" icon="lock">
    - Armazene cookies em variáveis de ambiente
    - Nunca faça commit de cookies no Git
    - Faça rotação de cookies regularmente
    - Use `.gitignore` para arquivos `.env`
  </Card>

  <Card title="Expiração de cookies" icon="clock">
    - Verifique os tempos de expiração no DevTools
    - Configure alertas antes da expiração
    - Extraia novamente os cookies quando expirarem
    - Considere usar autenticação baseada em formulário para cookies de curta duração
  </Card>

  <Card title="Limitação de taxa" icon="gauge">
    - Respeite os limites de taxa da aplicação
    - Adicione atrasos entre requisições
    - Monitore erros 429 (muitas solicitações)
    - Use backoff exponencial para novas tentativas
  </Card>

  <Card title="Tratamento de erros" icon="shield">
    - Verifique erros 401/403 (cookies expirados)
    - Valide o conteúdo da resposta
    - Registre falhas de autenticação
    - Tenha métodos de autenticação de contingência
  </Card>
</CardGroup>

---

<div id="troubleshooting">
  ## Solução de problemas
</div>

<AccordionGroup>
  <Accordion title="Erros 401 Unauthorized" icon="ban">
    **Possíveis causas:**
    - O cookie expirou
    - O cookie foi copiado incorretamente
    - A aplicação requer cabeçalhos adicionais
    - A sessão foi invalidada no servidor

    **Soluções:**
    - Extraia novamente os cookies no DevTools após um novo login
    - Verifique se você precisa de vários cookies (sessão + token CSRF)
    - Confirme se o domínio do cookie corresponde ao URL de destino
  </Accordion>

  <Accordion title="Cookie não funciona" icon="cookie-bite">
    **Verifique o seguinte:**
    - O nome do cookie está correto?
    - Você copiou todo o valor do cookie?
    - O cookie tem o domínio correto?
    - Há uma restrição de `Path` no cookie?
    - São necessários vários cookies?

    **Dica:** Copie todos os cookies no DevTools e teste com todos; depois, remova um a um para descobrir quais são necessários.
  </Accordion>

  <Accordion title="Sessão expira rápido demais" icon="hourglass">
    **Para sessões de curta duração:**
    - Use autenticação baseada em formulário
    - Automatize o login com ações
    - Configure um cron para renovar os cookies
    - Considere solicitar sessões mais longas ao administrador da sua ferramenta interna
  </Accordion>
</AccordionGroup>

<Note>
**Validade de cookies em ferramentas internas:** Muitas ferramentas internas definem cookies com validade de 7 a 30 dias, o que os torna ideais para tarefas recorrentes de scraping. Verifique o campo `Expires` do seu cookie no DevTools para saber por quanto tempo ele é válido.
</Note>