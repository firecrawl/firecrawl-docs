```python Python
# pip install firecrawl-py

from firecrawl import FirecrawlApp

app = FirecrawlApp(api_key="TU_API_KEY")

# Primero prueba con el proxy básico
try:
    content = app.scrape_url("https://example.com")
    
    # Verifica si obtuvimos un código de estado de error
    status_code = content.get("metadata", {}).get("statusCode")
    if status_code in [401, 403, 500]:
        print(f"Se obtuvo el código de estado {status_code}, reintentando con el proxy stealth")
        # Reintentar con el proxy stealth
        content = app.scrape_url("https://example.com", proxy="stealth")
    
    print(content["markdown"])
except Exception as e:
    print(f"Error: {e}")
    # Reintentar con el proxy stealth en caso de excepción
    try:
        content = app.scrape_url("https://example.com", proxy="stealth")
        print(content["markdown"])
    except Exception as e:
        print(f"El proxy stealth también falló: {e}")
```
