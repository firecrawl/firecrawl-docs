```bash cURL
# First try with default proxy
RESPONSE=$(curl -s -X POST https://api.firecrawl.dev/v2/scrape \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer YOUR_API_KEY' \
    -d '{
      "url": "https://example.com"
    }')

# Extract status code from response
STATUS_CODE=$(echo $RESPONSE | jq -r '.data.metadata.statusCode')

# Check if status code indicates we should retry with enhanced
if [[ "$STATUS_CODE" == "401" || "$STATUS_CODE" == "403" || "$STATUS_CODE" == "500" ]]; then
    echo "ステータスコード $STATUS_CODE を受信。enhancedプロキシで再試行します"
    
    # Retry with enhanced proxy
    curl -X POST https://api.firecrawl.dev/v2/scrape \
        -H 'Content-Type: application/json' \
        -H 'Authorization: Bearer YOUR_API_KEY' \
        -d '{
          "url": "https://example.com",
          "proxy": "enhanced"
        }'
else
    # Output the original response
    echo $RESPONSE
fi
```
